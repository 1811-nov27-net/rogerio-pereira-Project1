using Microsoft.EntityFrameworkCore;
using Project0.DataAccess;
using Project0.DataAccess.Repositories;
using System;
using System.Collections.Generic;
using System.Text;

namespace Project0.Library.Control.Model
{
    public class OrderController
    {
        OrderRepository repository = null;

        public OrderController()
        {
            repository = new OrderRepository(DbOptions.Context);
        }

        public List<Orders> getAll()
        {
            return (List<Orders>)repository.GetAll();
        }

        public Orders FindById(int id)
        {
            return (Orders)repository.GetById(id);
        }

        public List<Orders> FindByName(string name)
        {
            return (List<Orders>)repository.GetByName(name);
        }

        public List<Orders> FindByCustomer(int id)
        {
            return (List<Orders>)repository.GetByCustomer(id);
        }

        public List<Orders> FindByAddress(int id)
        {
            return (List<Orders>)repository.GetByAddress(id);
        }

        public Orders Save(Orders order)
        {
            Orders i = (Orders)repository.Save(order);
            repository.SaveChanges();
            return i;
        }

        public void Delete(int id)
        {
            repository.Delete(id);
            repository.SaveChanges();
        }

        public Orders Update(Orders order)
        {
            repository.Save(order, order.Id);
            repository.SaveChanges();
            return order;
        }

        public DateTime getLastOrderDate(int addressId)
        {
            return repository.getLastOrderDate(addressId);
        }

        public List<Pizzas> getSuggestedPizzas(int customerId)
        {
            return repository.getSuggestedPizzas(customerId);
        }
    }
}
